<!DOCTYPE html>
<html lang="ru">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="Content-Language" content="ru">

    <meta name="author" content="Alexander Pakhomov">
    <meta name="description" content="–ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω">
    <meta name="keywords" content="blog,developer,personal,apakhomov,alexander,pakhomov,aleksandr pakhomov, –ê–ª–µ–∫—Å–∞–Ω–¥—Ä –ü–∞—Ö–æ–º–æ–≤">

    <meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="–ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω"/>
<meta name="twitter:description" content="–ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω"/>

    <meta property="og:title" content="–ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω" />
<meta property="og:description" content="–ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://pakhomovalexander.github.io/ru/posts/smart-builder/" />
<meta property="article:published_time" content="2020-07-08T16:40:00+03:00" />
<meta property="article:modified_time" content="2020-07-08T16:40:00+03:00" />


    
      <base href="https://pakhomovalexander.github.io/ru/posts/smart-builder/">
    
    <title>
  –ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω ¬∑ apakhomov
</title>

    
      <link rel="canonical" href="https://pakhomovalexander.github.io/ru/posts/smart-builder/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.13.0/css/all.css" integrity="sha384-Bfad6CLCknfcloXFOyFnlgtENryhrpZCe29RTifKEixXQZ38WheV+i/6YWSzkz3V" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="https://pakhomovalexander.github.io/css/coder.min.a4f332213a21ce8eb521670c614470c58923aaaf385e2a73982c31dd7642decb.css" integrity="sha256-pPMyITohzo61IWcMYURwxYkjqq84XipzmCwx3XZC3ss=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="https://pakhomovalexander.github.io/css/custom.css" />
    

    

    <link rel="icon" type="image/png" href="https://pakhomovalexander.github.io/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="https://pakhomovalexander.github.io/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.70.0" />
  </head>

  
  
  <body class="colorscheme-light">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="https://pakhomovalexander.github.io/ru">
      apakhomov
    </a>
    
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars"></i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://pakhomovalexander.github.io/ru/posts/">–ë–ª–æ–≥</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="https://pakhomovalexander.github.io/ru/about/">–û–±–æ –º–Ω–µ</a>
          </li>
        
      
      
        
        
        
          
            
              <li class="navigation-item menu-separator">
                <span>|</span>
              </li>
              
            
            <li class="navigation-item">
              <a href="https://pakhomovalexander.github.io/">English</a>
            </li>
          
        
          
        
      
    </ul>
    
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">–ù–∞ –ø—É—Ç–∏ –∫ TDD. SmartBuilder –ø–∞—Ç—Ç–µ—Ä–Ω</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2020-07-08T16:40:00&#43;03:00'>
                July 8, 2020
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              –ß–∏—Ç–∞—Ç—å –æ–∫–æ–ª–æ 5 –º–∏–Ω—É—Ç
            </span>
          </div>
          <div class="categories">
  <i class="fas fa-folder"></i>
    <a href="https://pakhomovalexander.github.io/ru/categories/%D0%BD%D0%B0-%D0%BF%D1%83%D1%82%D0%B8-%D0%BA-tdd/">–ù–∞ –ø—É—Ç–∏ –∫ TDD</a></div>

          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="https://pakhomovalexander.github.io/ru/tags/java/">java</a>
      <span class="separator">‚Ä¢</span>
    <a href="https://pakhomovalexander.github.io/ru/tags/tdd/">tdd</a>
      <span class="separator">‚Ä¢</span>
    <a href="https://pakhomovalexander.github.io/ru/tags/dsl/">dsl</a>
      <span class="separator">‚Ä¢</span>
    <a href="https://pakhomovalexander.github.io/ru/tags/junit5/">JUnit5</a></div>

        </div>
      </header>

      <div>
        
        <h2 id="–∑–∞—á–µ–º">–ó–∞—á–µ–º</h2>
<p>–î–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–æ, –∑–∞—á–µ–º? –ó–∞—á–µ–º –¥–µ–ª–∞—Ç—å —Å–µ—Ä–∏—é —Å—Ç–∞—Ç–µ–π –æ <a href="https://ru.wikipedia.org/wiki/%D0%A0%D0%B0%D0%B7%D1%80%D0%B0%D0%B1%D0%BE%D1%82%D0%BA%D0%B0_%D1%87%D0%B5%D1%80%D0%B5%D0%B7_%D1%82%D0%B5%D1%81%D1%82%D0%B8%D1%80%D0%BE%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5">TDD</a>?</p>
<ul>
<li>üì¢ –ù–∞ –∫–æ–Ω—Ñ–µ—Ä–µ–Ω—Ü–∏—è—Ö –æ–± —ç—Ç–æ–º –≥–æ–≤–æ—Ä—è—Ç.</li>
<li>üéì –ù–∞ —Å–æ–±–µ—Å–µ–¥–æ–≤–∞–Ω–∏–∏ –ø–æ—è—Å–Ω–∏—Ç—å –∑–∞ TDD –º–æ–≥—É—Ç.</li>
<li>üí™ –ö—Ç–æ-—Ç–æ –¥–∞–∂–µ –ø—Ä–æ–±–æ–≤–∞–ª.</li>
<li>‚ù§Ô∏è –ö–æ–º—É-—Ç–æ –¥–∞–∂–µ –ø–æ–Ω—Ä–∞–≤–∏–ª–æ—Å—å.</li>
</ul>
<p>–ê –∫—Ç–æ –ø—Ä–æ–±–æ–≤–∞–ª –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å TDD –Ω–∞ –±–æ–ª—å—à–æ–º, –∑–∞–∫–æ—Å—Ç–µ–Ω–µ–ª–æ–º –ø—Ä–æ–µ–∫—Ç–µ?  –ì–¥–µ —Ä–∞–∑–º–µ—Ä –æ–±—ä–µ–∫—Ç–æ–≤ –ø–æ–¥–æ–≥—Ä–µ–≤–∞–µ—Ç —Å—Ç—É–ª—å—è, –∞ –ø–æ—Å–ª–µ –ø—Ä–æ—á—Ç–µ–Ω–∏—è –¢–ó —Ö–æ—á–µ—Ç—Å—è –≤—ã–π—Ç–∏ –≤ –æ–∫–Ω–æ. –ù—É –∏ –∫–∞–∫? –†–∞–±–æ—Ç–∞–µ—Ç —Ç–µ—Å—Ç –¥—Ä–∏–≤–µ–Ω –º–∞–≥–∏—è? –°–∫–æ—Ä–µ–µ –≤—Å–µ–≥–æ –Ω–µ—Ç. üí©</p>
<p>–†–∞—Å—Å–∫–∞–∂—É –∫–∞–∫ –Ω–µ –≤—ã–≤–∞–ª–∏–≤–∞—Ç—å—Å—è –∏–∑ —Ü–∏–∫–ª–∞ red-green-refactor –Ω–∞ —Ç–æ–º —Å–∞–º–æ–º –±–æ–ª—å—à–æ–º –ø—Ä–æ–µ–∫—Ç–µ.</p>
<hr>
<h2 id="—á—Ç–æ-–º–µ—à–∞–µ—Ç">–ß—Ç–æ –º–µ—à–∞–µ—Ç</h2>
<p>–î–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –∫–æ–¥–∏—Ä–æ–≤–∞–Ω–∏—è –≤ –ø–æ—Ç–æ–∫–µ red-green-refactor
—Ç–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –Ω–µ–±–æ–ª—å—à–æ–≥–æ —Ä–∞–∑–º–µ—Ä–∞, –º–µ—Ç–æ–¥—ã –ø—Ä–æ—Å—Ç—ã–º–∏ –¥–ª—è –≤–æ—Å–ø—Ä–∏—è—Ç–∏—è.</p>
<p>–ù–∞ —Å–ª–æ–≤–∞—Ö –ø—Ä–æ—Å—Ç–æ, –∞ –∫–∞–∫ –Ω–∞—Å—á–µ—Ç –∫–æ–¥–∞?</p>
<h3 id="–∏—Å—Ö–æ–¥–Ω—ã–µ-–¥–∞–Ω–Ω—ã–µ">–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ</h3>
<p>–î–æ–ø—É—Å—Ç–∏–º –¥–æ–º–µ–Ω–Ω–∞—è –º–æ–¥–µ–ª—å —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ <code>Person</code> –∏ <code>Organisation</code>. –ù–∞ –¥–µ–ª–µ –≤ —Ä–∞–∑—ã –±–æ–ª—å—à–µ, –Ω–æ –¥–ª—è –ø—Ä–∏–º–µ—Ä–∞ –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ.</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">abstract</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">AbstractCustomer</span> {
    <span style="font-weight:bold">private</span> Address address;

    <span style="font-weight:bold">public</span> <span style="font-weight:bold">abstract</span> String getWelcomeName();

    <span style="font-weight:bold">public</span> String getCountry() {
        <span style="font-weight:bold">return</span> address.getCountry();
    }

    <span style="font-style:italic">// geters and setters
</span><span style="font-style:italic"></span>}
</code></pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">Organisation</span> <span style="font-weight:bold">extends</span> AbstractCustomer {

    <span style="font-weight:bold">private</span> String organisationName;

    @Override
    <span style="font-weight:bold">public</span> String getWelcomeName() {
        <span style="font-weight:bold">return</span> organisationName;
    }


    <span style="font-style:italic">// geters and setters
</span><span style="font-style:italic"></span>}
</code></pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">Person</span> <span style="font-weight:bold">extends</span> AbstractCustomer {
    <span style="font-weight:bold">private</span> String firstName;
    <span style="font-weight:bold">private</span> String lastName;

    @Override
    <span style="font-weight:bold">public</span> String getWelcomeName() {
        <span style="font-weight:bold">return</span> firstName + <span style="font-style:italic">&#34; &#34;</span> + lastName;
    }


    <span style="font-style:italic">// geters and setters
</span><span style="font-style:italic"></span>}
</code></pre></div><div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">Address</span> {
    <span style="font-weight:bold">private</span> String street;
    <span style="font-weight:bold">private</span> String city;
    <span style="font-weight:bold">private</span> String country;
    <span style="font-weight:bold">private</span> <span style="">int</span> house;
    <span style="font-weight:bold">private</span> <span style="">int</span> index;

    <span style="font-style:italic">// getters and setters
</span><span style="font-style:italic"></span>}
</code></pre></div><p>–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∞—Ç—Ç–µ—Ä–Ω JavaBeans. –≠—Ç–æ –∫–æ–≥–¥–∞ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –ø—É—Å—Ç–æ–π, –∞ –æ–±—ä–µ–∫—Ç –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ —Å–µ—Ç—Ç–µ—Ä—ã. –î–∞, –Ω–µ –ª—É—á—à–∏–π –≤—ã–±–æ—Ä, –Ω–æ –∏ –ø—Ä–æ–µ–∫—Ç —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –Ω–∞—Å–ª–µ–¥–∏–µ–º. <a href="https://medium.com/@muradhajiyev/why-builder-pattern-not-telescoping-or-javabeans-6daa689f418">–í–æ—Ç —Å—Ç–∞—Ç—å—è</a> –æ —Ä–∞–∑–Ω—ã—Ö –≤–∏–¥–∞—Ö —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤ –≤ java. –°–ø–æ–π–ª–µ—Ä: –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –±–∏–ª–¥–µ—Ä.</p>
<p>–ú—ã –±—É–¥–µ–º —Ä–∞–±–æ—Ç–∞—Ç—å —Å —Ç–µ–º, —á—Ç–æ –µ—Å—Ç—å. üíÅ‚Äç‚ôÄÔ∏è</p>
<h4 id="–∑–∞–¥–∞—á–∞">–ó–∞–¥–∞—á–∞</h4>
<p>–†–∞–∑—Ä–∞–±–æ—Ç–∞—Ç—å —Å–µ—Ä–≤–∏—Å Hostel. Hostel —É–º–µ–µ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å –∫–ª–∏–µ–Ω—Ç–æ–≤ —Ñ—Ä–∞–∑–æ–π <code>&quot;Welcome in hoselName, customer.getWelcomeName(). customer.getCountry() is great!&quot;</code>. –í–æ—Ç –∏ –≤—Å—è –∑–∞–¥–∞—á–∞.</p>
<p>–ü–æ–≥–Ω–∞–ª–∏!</p>
<h3 id="–ø–µ—Ä–≤—ã–π-–∑–∞—Ö–æ–¥">–ü–µ—Ä–≤—ã–π –∑–∞—Ö–æ–¥</h3>
<p>–û–ø—Ä–µ–¥–µ–ª—è–µ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Hostel</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">interface</span> <span style="font-weight:bold">Hostel</span> {
    String getWelcome(AbstractCustomer customer);
}
</code></pre></div><p>–ò –¥–µ—Ñ–æ–ª—Ç–Ω—É—é –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—é</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">HostelImpl</span> <span style="font-weight:bold">implements</span> Hostel {
    <span style="font-weight:bold">private</span> String hostelName;

    <span style="font-weight:bold">public</span> HostelImpl(String hostelName) {
        <span style="font-weight:bold">this</span>.hostelName = hostelName;
    }

    @Override
    <span style="font-weight:bold">public</span> String getWelcome(AbstractCustomer customer) {
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">null</span>;
    }
</code></pre></div><p>–ü–∏—à–µ–º —Ç–µ—Å—Ç</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">class</span> <span style="font-weight:bold">HostelImplTestWithoutSmartBuilder</span> {
    Hostel service;

    @BeforeEach
    <span style="">void</span> setUp() {
        service = <span style="font-weight:bold">new</span> HostelImpl(<span style="font-style:italic">&#34;Best hostel&#34;</span>);
    }

    @Test
    <span style="">void</span> shouldWelcomePerson() {
        <span style="font-style:italic">// Given
</span><span style="font-style:italic"></span>        Address address = <span style="font-weight:bold">new</span> Address();
        address.setCountry(<span style="font-style:italic">&#34;Russia&#34;</span>);
        address.setCity(<span style="font-style:italic">&#34;Moscow&#34;</span>);
        <span style="font-style:italic">// And
</span><span style="font-style:italic"></span>        Person person = <span style="font-weight:bold">new</span> Person();
        person.setFirstName(<span style="font-style:italic">&#34;Alexander&#34;</span>);
        person.setLastName(<span style="font-style:italic">&#34;Pakhomov&#34;</span>);
        person.setAddress(address);

        <span style="font-style:italic">// When
</span><span style="font-style:italic"></span>        String welcomeMessage = service.getWelcome(person);

        <span style="font-style:italic">// Then
</span><span style="font-style:italic"></span>        assertThat(welcomeMessage).isEqualTo(<span style="font-style:italic">&#34;Welcome in Best hostel, Alexander Pakhomov. Russia is great!&#34;</span>);
    }
</code></pre></div><p>–ü—Ä–µ–¥–ª–∞–≥–∞—é –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å –Ω–∞ —Ç–µ—Å—Ç.
–î–ª—è —Ç–∞–∫–æ–≥–æ –ø—Ä–æ—Å—Ç–æ–≥–æ –∫–µ–π—Å–∞ —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –∫–æ–¥–∞. –ü—Ä–æ–±–ª–µ–º–∞ —Å —Å–µ–∫—Ü–∏–µ–π <code>//Given</code>.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">class HostelImplTestWithoutSmartBuilder {
    Hostel service;

    @BeforeEach
    void setUp() {
        service = new HostelImpl(&#34;Best hostel&#34;);
    }

    @Test
    void shouldWelcomePerson() {
<span style="display:block;width:100%;background-color:#e5e5e5">        // Given
</span><span style="display:block;width:100%;background-color:#e5e5e5">        Address address = new Address();
</span><span style="display:block;width:100%;background-color:#e5e5e5">        address.setCountry(&#34;Russia&#34;);
</span><span style="display:block;width:100%;background-color:#e5e5e5">        address.setCity(&#34;Moscow&#34;);
</span><span style="display:block;width:100%;background-color:#e5e5e5">        // And
</span><span style="display:block;width:100%;background-color:#e5e5e5">        Person person = new Person();
</span><span style="display:block;width:100%;background-color:#e5e5e5">        person.setFirstName(&#34;Alexander&#34;);
</span><span style="display:block;width:100%;background-color:#e5e5e5">        person.setLastName(&#34;Pakhomov&#34;);
</span><span style="display:block;width:100%;background-color:#e5e5e5">        person.setAddress(address);
</span>
        // When
        String welcomeMessage = service.getWelcome(person);

        // Then
        assertThat(welcomeMessage).isEqualTo(&#34;Welcome in Best hostel, Alexander Pakhomov. Russia is great!&#34;);
    }
</code></pre></td></tr></table>
</div>
</div><p>–°–ª–∏—à–∫–æ–º –≥—Ä–æ–º–æ–∑–¥–∫–æ. –°—É—Ç—å —Ç–µ—Å—Ç–∞ –∑–∞–º—ã–ª–∏–≤–∞–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ–º –æ–±—ä–µ–∫—Ç–æ–≤ <code>Person</code> –∏ <code>Address</code>. –ù—É–∂–Ω–æ —ç—Ç–æ —É–ø—Ä–æ—Å—Ç–∏—Ç—å.</p>
<h3 id="–≤—Ç–æ—Ä–æ–π-–∑–∞—Ö–æ–¥">–í—Ç–æ—Ä–æ–π –∑–∞—Ö–æ–¥</h3>
<h4 id="–≤—ã–Ω–æ—Å–∏–º-—Å–æ–∑–¥–∞–Ω–∏–µ-–æ–±—ä–µ–∫—Ç–æ–≤-–≤-–æ—Ç–¥–µ–ª—å–Ω—ã–π-–º–µ—Ç–æ–¥">–í—ã–Ω–æ—Å–∏–º —Å–æ–∑–¥–∞–Ω–∏–µ –æ–±—ä–µ–∫—Ç–æ–≤ –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π –º–µ—Ç–æ–¥</h4>
<p>–ú—ã—Å–ª—å –æ—á–µ–≤–∏–¥–Ω–∞—è –∏ –≤ –±–æ–ª—å—à–∏–Ω—Å—Ç–≤–µ —Å–ª—É—á–∞–µ–≤ —Ä–∞–±–æ—Ça–µ—Ç. –ù–æ –∫–æ–≥–¥–∞ –¥–µ–ª–æ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –æ–≥—Ä–æ–º–Ω–æ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø–æ–ª–µ–π —É –æ–±—ä–µ–∫—Ç–æ–≤, —Ç–æ –ø–æ–ª—É—á–∞–µ–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java">Person givenPerson = createSamplePerson(<span style="font-style:italic">&#34;Saha&#34;</span>, <span style="font-style:italic">&#34;Pushkin&#34;</span>, <span style="font-style:italic">&#34;Russia&#34;</span>,<span style="font-style:italic">&#34;Kolotushkina 29&#34;</span>, <span style="font-weight:bold">null</span>, <span style="font-weight:bold">null</span>, 0, <span style="font-style:italic">&#34;&#34;</span>)
</code></pre></div><p>–∏ —ç—Ç–æ –µ—â–µ –ª–∞–π—Ç. –ù–∞–ø–æ–º–Ω—é, –ø—Ä–æ–µ–∫—Ç —Å –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–º –Ω–∞—Å–ª–µ–¥–∏–µ–º!</p>
<p>–î–∞, –∫–æ–¥ –º–æ–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å: –≤—ã–Ω–µ—Å—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ, –¥–æ–±–∞–≤–∏—Ç—å –µ—â–µ –º–µ—Ç–æ–¥–æ–≤. –ù–æ —ç—Ç–æ –Ω–µ —Ä–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã, —ç—Ç–æ –ø–æ–¥–∞–≤–ª–µ–Ω–∏–µ —Å–∏–º–ø—Ç–æ–º–æ–≤. –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π –º–µ—Ö–∞–Ω–∏–∑–º —Å–æ–∑–¥–∞–Ω–∏—è –æ–±—ä–µ–∫—Ç–æ–≤.</p>
<h3 id="—Ç—Ä–µ—Ç–∏–π-–∑–∞—Ö–æ–¥">–¢—Ä–µ—Ç–∏–π –∑–∞—Ö–æ–¥</h3>
<h4 id="–∏—Å–ø–æ–ª—å–∑—É–µ–º-builder">–ò—Å–ø–æ–ª—å–∑—É–µ–º Builder</h4>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-style:italic">// Given
</span><span style="font-style:italic"></span>var person = Person.builder()
                    .firstName(<span style="font-style:italic">&#34;Alexander&#34;</span>)
                    .lastName(<span style="font-style:italic">&#34;Pakhomov&#34;</span>)
                    .address(Address.builder()
                                    .country(<span style="font-style:italic">&#34;Russia&#34;</span>)
                                    .city(<span style="font-style:italic">&#34;Moscow&#34;</span>)
                                    .build())
                    .build()
        );
</code></pre></div><p>–£–∂–µ –ª—É—á—à–µ. –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∏–º–µ–Ω–æ–≤–∞–Ω–Ω—ã –∏ —Ç–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã. –ù–æ —á—Ç–æ —Ç—É—Ç –Ω–µ —Ç–∞–∫?</p>
<p>–ú—ã —Ö–æ—Ç–∏–º –ø–∏—Å–∞—Ç—å –≤ TDD –ø–∞—Ä–∞–¥–∏–≥–º–µ. –¢–µ—Å—Ç—ã –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –ø—Ä–æ—Å—Ç—ã–º–∏, –æ—Ç—Ä–∞–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ —Å–ø–µ—Ü–∏—Ñ–∏–∫–∞—Ü–∏—é. –ú—ã –¥–æ–ª–∂–Ω—ã —á–∏—Ç–∞—Ç—å —Ç–µ—Å—Ç—ã –∫–∞–∫ –æ–ø–∏—Å–∞–Ω–∏–µ –ø–æ–≤–µ–¥–µ–Ω–∏—è –æ–±—ä–µ–∫—Ç–∞. –ù–∞–ª–∏—á–∏–µ <code>Person.builder()</code> –∏ –Ω–∏–∫–æ–º—É (–≤ —Ç–µ—Å—Ç–µ) –Ω–µ –Ω—É–∂–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤ <code>.build()</code> —É—Å–ª–æ–∂–Ω—è–µ—Ç —á—Ç–µ–Ω–∏–µ –∫–æ–¥–∞.</p>
<div class="highlight"><div style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span></span><span style="display:block;width:100%;background-color:#e5e5e5"><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span></span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-fallback" data-lang="fallback">// Given
<span style="display:block;width:100%;background-color:#e5e5e5">var person = Person.builder()
</span>                    .firstName(&#34;Alexander&#34;)
                    .lastName(&#34;Pakhomov&#34;)
<span style="display:block;width:100%;background-color:#e5e5e5">                    .address(Address.builder()
</span>                                    .country(&#34;Russia&#34;)
                                    .city(&#34;Moscow&#34;)
<span style="display:block;width:100%;background-color:#e5e5e5">                                    .build())
</span><span style="display:block;width:100%;background-color:#e5e5e5">                    .build()
</span>        );
</code></pre></td></tr></table>
</div>
</div><hr>
<h2 id="—Ä–µ—à–µ–Ω–∏–µ----smartbuilder-">–†–µ—à–µ–Ω–∏–µ &ndash; SmartBuilder üë∑‚Äç‚ôÇÔ∏è</h2>
<h3 id="–∫–∞–∫-—ç—Ç–æ-–≤—ã–≥–ª—è–¥–∏—Ç-–≤-–∏—Ç–æ–≥–µ">–ö–∞–∫ —ç—Ç–æ –≤—ã–≥–ª—è–¥–∏—Ç –≤ –∏—Ç–æ–≥–µ</h3>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-style:italic">// Given
</span><span style="font-style:italic"></span>var person = given(
        person().firstName(<span style="font-style:italic">&#34;Alexander&#34;</span>)
                .lastName(<span style="font-style:italic">&#34;Pakhomov&#34;</span>)
                .address(address().country(<span style="font-style:italic">&#34;Russia&#34;</span>).city(<span style="font-style:italic">&#34;Moscow&#34;</span>))
        );
</code></pre></div><h3 id="–∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è">–ò–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è</h3>
<p>–ë–∞–∑–æ–≤—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—Å–µ—Ö SmartBuilder-–æ–≤</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">interface</span> <span style="font-weight:bold">GenericBuilder</span>&lt;T, B <span style="font-weight:bold">extends</span> GenericBuilder&lt;T, B&gt;&gt; {
    T build();
}
</code></pre></div><p>–ê–±—Å—Ç—Ä–∞–∫—Ç–Ω—ã–π –±–∏–ª–¥–µ—Ä –¥–ª—è <code>AbstractiCustormer</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">abstract</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">CustomerBuilder</span>&lt;T <span style="font-weight:bold">extends</span> AbstractCustomer, B <span style="font-weight:bold">extends</span> CustomerBuilder&lt;T, B&gt;&gt;
        <span style="font-weight:bold">implements</span> GenericBuilder&lt;T,B&gt; {

    <span style="font-weight:bold">private</span> Address address;

    <span style="font-weight:bold">public</span> GenericBuilder&lt;T,B&gt; address(Address address) {
        <span style="font-weight:bold">this</span>.address = address;
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">this</span>;
    }

    <span style="font-weight:bold">public</span> GenericBuilder&lt;T,B&gt; address(AddressBuilder&lt;Address&gt; addressBuilder) {
        <span style="font-weight:bold">this</span>.address = addressBuilder.build();
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">this</span>;
    }

    <span style="font-weight:bold">protected</span> <span style="font-weight:bold">abstract</span> T createCustomer();

    @Override
    <span style="font-weight:bold">public</span> T build() {
        T customer = createCustomer();
        customer.setAddress(address);

        <span style="font-weight:bold">return</span> customer;
    }
}
</code></pre></div><p>–ë–∏–ª–¥–µ—Ä –¥–ª—è <code>Person</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">PersonBuilder</span>&lt;T <span style="font-weight:bold">extends</span> Person&gt; <span style="font-weight:bold">extends</span> CustomerBuilder&lt;T, PersonBuilder&lt;T&gt;&gt; {
    <span style="font-weight:bold">private</span> String firstName;
    <span style="font-weight:bold">private</span> String lastName;

    <span style="font-weight:bold">public</span> PersonBuilder&lt;T&gt; firstName(String firstName) {
        <span style="font-weight:bold">this</span>.firstName = firstName;
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">this</span>;
    }

    <span style="font-weight:bold">public</span> PersonBuilder&lt;T&gt; lastName(String lastName) {
        <span style="font-weight:bold">this</span>.lastName = lastName;
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">this</span>;
    }

    @Override
    <span style="font-weight:bold">protected</span> T createCustomer() {
        T person = (T) <span style="font-weight:bold">new</span> Person();
        person.setFirstName(<span style="font-weight:bold">this</span>.firstName);
        person.setLastName(<span style="font-weight:bold">this</span>.lastName);

        <span style="font-weight:bold">return</span> person;
    }
}
</code></pre></div><p>–ë–∏–ª–¥–µ—Ä –¥–ª—è <code>Organisation</code></p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">OrganisationBuilder</span>&lt;T <span style="font-weight:bold">extends</span> Organisation&gt; <span style="font-weight:bold">extends</span> CustomerBuilder&lt;T, OrganisationBuilder&lt;T&gt;&gt; {
    <span style="font-weight:bold">private</span> String organisationName;

    <span style="font-weight:bold">public</span> OrganisationBuilder&lt;T&gt; organisationName(String organisationName) {
        <span style="font-weight:bold">this</span>.organisationName = organisationName;
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">this</span>;
    }

    @Override
    <span style="font-weight:bold">protected</span> T createCustomer() {
        T organisation = (T) <span style="font-weight:bold">new</span> Organisation();
        organisation.setOrganisationName(organisationName);

        <span style="font-weight:bold">return</span> organisation;
    }
}
</code></pre></div><p>–ò —Ñ–∏–Ω–∞–ª–æ—á–∫–∞ - DSL –≤ –≤–∏–¥–µ —Å—Ç–∞—Ç–∏—á–Ω—ã—Ö –º–µ—Ç–æ–¥–æ–≤</p>
<div class="highlight"><pre style="background-color:#fff;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-java" data-lang="java"><span style="font-weight:bold">public</span> <span style="font-weight:bold">class</span> <span style="font-weight:bold">GenericBuilderDsl</span> {
    <span style="font-weight:bold">public</span> <span style="font-weight:bold">static</span> &lt;T, B <span style="font-weight:bold">extends</span> GenericBuilder&lt;T, B&gt;&gt; T given(GenericBuilder&lt;T, B&gt; builder) {
        <span style="font-weight:bold">return</span> builder.build();
    }

    <span style="font-weight:bold">public</span> <span style="font-weight:bold">static</span> PersonBuilder&lt;Person&gt; person() {
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">new</span> PersonBuilder&lt;&gt;();
    }

    <span style="font-weight:bold">public</span> <span style="font-weight:bold">static</span> OrganisationBuilder&lt;Organisation&gt; organisation() {
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">new</span> OrganisationBuilder&lt;&gt;();
    }

    <span style="font-weight:bold">public</span> <span style="font-weight:bold">static</span> AddressBuilder&lt;Address&gt; address() {
        <span style="font-weight:bold">return</span> <span style="font-weight:bold">new</span> AddressBuilder&lt;&gt;();
    }
}
</code></pre></div><p>–í–æ—Ç –∏ –≤—Å–µ! SmartBuilder-—ã —É–¥–æ–±–Ω—ã –¥–ª—è –Ω–∞–ø–∏—Å–∞–Ω–∏—è —Ç–µ—Å—Ç–æ–≤, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–∂–µ—Ç –ø—Ä–æ—á–∏—Ç–∞—Ç—å –¥–∞–∂–µ –≤–∞—à PM.</p>
<p>–ï—Å–ª–∏ –≤–∞–º –ø–æ–Ω—Ä–∞–≤–∏–ª–∞—Å—å —ç—Ç–∞ –∏–¥–µ—è:</p>
<ul>
<li><a href="https://github.com/PakhomovAlexander/java-tests-best-practices/tree/master/dsl-for-tests/src/test/java/io/github/pakhomovalexander/builders">–≤–æ—Ç –∏–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü–∏—è</a></li>
<li><a href="https://github.com/PakhomovAlexander/java-tests-best-practices/blob/master/dsl-for-tests/src/test/java/io/github/pakhomovalexander/service/HostelImplTestWithoutSmartBuilder.java">—Ç—É—Ç</a> –º–æ–∂–Ω–æ –ø–æ—Å–º–æ—Ç—Ä–µ—Ç—å —Ç–µ—Å—Ç –±–µ–∑ SmartBuilder</li>
<li><a href="https://github.com/PakhomovAlexander/java-tests-best-practices/blob/master/dsl-for-tests/src/test/java/io/github/pakhomovalexander/service/HostelImplTestWithSmartBuilder.java">—Ç—É—Ç</a> —Ç–µ—Å—Ç —Å SmartBuilder</li>
</ul>
<p>–ü–æ–¥–ø–∏—Å—ã–≤–∞–π—Ç–µ—Å—å –Ω–∞ <a href="https://t.me/toxic_enterprise">–¥—É—à–Ω—ã–π –∫–∞–Ω–∞–ª</a> –∏ <a href="https://twitter.com/alexandr_phmv">—Ç–≤–∏—Ç—Ç–µ—Ä</a>. –í —Å–ª–µ–¥—É—é—â–µ–π —Å—Ç–∞—Ç—å–µ –ø–æ–π–¥–µ–º –¥–∞–ª—å—à–µ. ü§ò</p>

      </div>


      <footer>
        


        <div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "alexander" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        
        
      </footer>
    </article>

    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
  <script type="text/javascript" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/startup.js" id="MathJax-script"></script>
  <script>
    MathJax = {
      tex: {
        inlineMath: [
          ['$', '$'], ['\\(', '\\)']
        ],
        processEscapes: true,
        processEnvironments: true
      },
      options: {
        skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre']
      }
    };
  </script>
  </section>

      </div>

      
  <footer class="footer">
    <section class="container">
      
        <p>Contact me apkhmv@gmail.com</p>
      
      
        ¬©
        
        2020
         Alexander Pakhomov 
      
      
      
    </section>
  </footer>

    </main>

    

    

    

  </body>

</html>
